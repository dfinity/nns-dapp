{
  "args": [
    "--new"
  ],
  "behavior": [
    {
      "command": "date +%Y-%m-%d",
      "stdout": "2001-02-29",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "git show-ref --quiet --verify refs/heads/Release-2001-02-29",
      "stdout": "",
      "stderr": "",
      "exitCode": 1
    },
    {
      "command": "git rev-parse --show-toplevel",
      "stdout": "/home/runner/work/nns-dapp",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "cd /home/runner/work/nns-dapp",
      "stdout": "",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "git diff --quiet --exit-code",
      "stdout": "",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "date +%Y-%m-%d\\ %H:%M:%S",
      "stdout": "2001-02-29 14:15:16",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "is_release_sop_script_newest_version",
      "stdout": "yes",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "git rev-parse release-candidate",
      "stdout": "a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "npm_audit",
      "stdout": "found 0 vulnerabilities",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "cargo_audit",
      "stdout": "RUSTSEC-2020-0071,RUSTSEC-2020-0159",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "no_html_in_templates",
      "stdout": "Checked",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "scripts/nns-dapp/get-hash-from-ci-log --commit tags/release-candidate",
      "stdout": "6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "sha256 /home/runner/work/nns-dapp/release/ci/nns-dapp.wasm.gz",
      "stdout": "6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "get_dfx_identity",
      "stdout": "default: s2dw5-fmktb-knrnq-772tr-ca3g7-me224-st35j-f3eli-xx2vf-aoesd-2qe",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "dfx canister id nns-dapp --network staging",
      "stdout": "jefp3-bqaaa-aaaaa-aacyq-cai",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "cat nns-dapp-arg-staging.did",
      "stdout": "(record{})",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "get_module_hash_from_network staging",
      "stdout": "6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "post_rc_on_slack",
      "stdout": "https://dfinity.slack.com/archives/C03HZERHBT3/p1687962898467509",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "scripts/nns-dapp/../canister_ids --export --network staging",
      "stdout": "{ \"internet_identity\": { \"staging\": \"wqmuk-5qaaa-aaaaa-aaaqq-cai\" } }",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "verify_build",
      "stdout": "41ed48445882e6cff25f14c10ca1fb5c34b2df04c4c2b4d77a6244a0baa0e5ca  assets.tar.xz\n6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4  nns-dapp.wasm.gz\nbf2a1d0abe03272358245d5fa25f5b24ba32aa8eb7fd0367e3e68e975a2771ff  sns_aggregator.wasm.gz\nd176b7f73b1622d7e9b38fab17aa81114cf09602dab519d37e30d81da870237f  nns-dapp-arg-mainnet.did\n869aabef4d2f757645692a11bd845b90284f8e942890c4b1fb74f751785fa2f2  nns-dapp-arg-mainnet.bin",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "scripts/nns-dapp/get-hash-from-ci-log --commit tags/release-candidate --filename nns-dapp-arg-mainnet.bin",
      "stdout": "869aabef4d2f757645692a11bd845b90284f8e942890c4b1fb74f751785fa2f2",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "cat /home/runner/work/nns-dapp/release/proposal_id",
      "stdout": "123490",
      "stderr": "",
      "exitCode": 0
    },
    {
      "command": "post_proposal_on_slack",
      "stdout": "https://dfinity.slack.com/archives/C02P68W6MQA/p1695977290251409",
      "stderr": "",
      "exitCode": 0
    }
  ],
  "expectedOutput": [
    "Checklist file: scripts/nns-dapp/Release-2001-02-29.json",
    "Start time: \u001b[32m2001-02-29 14:15:16\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git fetch --tags --force",
    "",
    "git fetch --tags --force: \u001b[32mDone\u001b[0m",
    "Release SOP script is newest version: \u001b[32myes\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git checkout -b Release-2001-02-29 --no-track origin/main",
    "",
    "git checkout -b Release-2001-02-29 --no-track origin/main: \u001b[32mDone\u001b[0m",
    "Release branch: \u001b[32mRelease-2001-02-29\u001b[0m",
    "Current branch: \u001b[32mRelease-2001-02-29\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git push origin Release-2001-02-29",
    "",
    "git push origin Release-2001-02-29: \u001b[32mDone\u001b[0m",
    "Release branch URL: \u001b[32mhttps://github.com/dfinity/nns-dapp/tree/Release-2001-02-29\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git tag -f release-candidate",
    "",
    "git tag -f release-candidate: \u001b[32mDone\u001b[0m",
    "Release commit: \u001b[32ma1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3\u001b[0m",
    "tags/release-candidate commit: \u001b[32ma1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git push origin -f tags/release-candidate",
    "",
    "git push origin -f tags/release-candidate: \u001b[32mDone\u001b[0m",
    "Security test: npm audit: \u001b[32mfound 0 vulnerabilities\u001b[0m",
    "Expected npm audit: \u001b[32mfound 0 vulnerabilities\u001b[0m",
    "Security test: cargo audit: \u001b[32mRUSTSEC-2020-0071,RUSTSEC-2020-0159\u001b[0m",
    "Expected cargo audit: \u001b[32mRUSTSEC-2020-0071,RUSTSEC-2020-0159\u001b[0m",
    "Security test: no HTML in templates: \u001b[32mChecked\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "scripts/nns-dapp/download-ci-wasm --commit tags/release-candidate --dir /home/runner/work/nns-dapp/release/ci --wasm-filename nns-dapp.wasm.gz",
    "",
    "scripts/nns-dapp/download-ci-wasm --commit tags/release-candidate --dir /home/runner/work/nns-dapp/release/ci --wasm-filename nns-dapp.wasm.gz: \u001b[32mDone\u001b[0m",
    "CI NNS-dapp WASM hash: \u001b[32m6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4\u001b[0m",
    "Local WASM hash: \u001b[32m6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "scripts/canister_ids --remove --network staging --canister nns-dapp",
    "",
    "scripts/canister_ids --remove --network staging --canister nns-dapp: \u001b[32mDone\u001b[0m",
    "dfx identity: \u001b[32mdefault: s2dw5-fmktb-knrnq-772tr-ca3g7-me224-st35j-f3eli-xx2vf-aoesd-2qe\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "dfx canister create nns-dapp --network staging --no-wallet",
    "",
    "dfx canister create nns-dapp --network staging --no-wallet: \u001b[32mDone\u001b[0m",
    "NNS-dapp staging canister ID: \u001b[32mjefp3-bqaaa-aaaaa-aacyq-cai\u001b[0m",
    "Current NNS-dapp staging canister ID: \u001b[32mjefp3-bqaaa-aaaaa-aacyq-cai\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "DFX_NETWORK=staging ./config.sh",
    "",
    "DFX_NETWORK=staging ./config.sh: \u001b[32mDone\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "dfx canister install nns-dapp --argument \\(record\\{\\}\\) --network staging --wasm /home/runner/work/nns-dapp/release/ci/nns-dapp.wasm.gz",
    "",
    "dfx canister install nns-dapp --argument \\(record\\{\\}\\) --network staging --wasm /home/runner/work/nns-dapp/release/ci/nns-dapp.wasm.gz: \u001b[32mDone\u001b[0m",
    "Staging URL: \u001b[32mhttps://jefp3-bqaaa-aaaaa-aacyq-cai.nnsdapp.dfinity.network/\u001b[0m",
    "Staging WASM hash: \u001b[32m6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4\u001b[0m",
    "Post RC on Slack: \u001b[32mhttps://dfinity.slack.com/archives/C03HZERHBT3/p1687962898467509\u001b[0m",
    "",
    "Update the 'Playground' bookmark on the #eng-nns-dapp Slack channel to point to the new release candidate.",
    "",
    "Slack channel: https://dfinity.slack.com/channels/eng-nns-dapp",
    "New Playground bookmark: https://jefp3-bqaaa-aaaaa-aacyq-cai.nnsdapp.dfinity.network/",
    "",
    "When you've done that ‚òùÔ∏è  confirm by entering 'y':",
    "Update playground: \u001b[32mDone\u001b[0m",
    "Canister IDs: \u001b[32m{ \"internet_identity\": { \"staging\": \"wqmuk-5qaaa-aaaaa-aaaqq-cai\" } }\u001b[0m",
    "Build hashes: \u001b[32m41ed48445882e6cff25f14c10ca1fb5c34b2df04c4c2b4d77a6244a0baa0e5ca  assets.tar.xz",
    "6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4  nns-dapp.wasm.gz",
    "bf2a1d0abe03272358245d5fa25f5b24ba32aa8eb7fd0367e3e68e975a2771ff  sns_aggregator.wasm.gz",
    "d176b7f73b1622d7e9b38fab17aa81114cf09602dab519d37e30d81da870237f  nns-dapp-arg-mainnet.did",
    "869aabef4d2f757645692a11bd845b90284f8e942890c4b1fb74f751785fa2f2  nns-dapp-arg-mainnet.bin\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "scripts/nns-dapp/release-template",
    "",
    "scripts/nns-dapp/release-template: \u001b[32mDone\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "scripts/nns-dapp/release-check",
    "",
    "scripts/nns-dapp/release-check: \u001b[32mDone\u001b[0m",
    "Built NNS-dapp WASM hash: \u001b[32m6fbaddd1b8fde76de97ca1b03a356f01741878d6210cd9b7c6753ae80ae374a4\u001b[0m",
    "cat: /home/runner/work/nns-dapp/release/PROPOSAL.md: No such file or directory",
    "",
    "==  release/PROPOSAL.md:  ============================================",
    "",
    "",
    "======================================================================",
    "",
    "Review the proposal above ‚òùÔ∏è  and have someone else review it as well.",
    "",
    "When you've done that ‚òùÔ∏è  confirm by entering 'y':",
    "Review proposal: \u001b[32mDone\u001b[0m",
    "scripts/nns-dapp/release-sop: line 395: /home/runner/work/nns-dapp/release/nns-dapp-arg-mainnet.did: No such file or directory",
    "",
    "",
    "Review the feature flags above ‚òùÔ∏è  .",
    "",
    "When you've done that ‚òùÔ∏è  confirm by entering 'y':",
    "Review feature flags: \u001b[32mDone\u001b[0m",
    "CI mainnet args hash: \u001b[32m869aabef4d2f757645692a11bd845b90284f8e942890c4b1fb74f751785fa2f2\u001b[0m",
    "Built mainnet args hash: \u001b[32m869aabef4d2f757645692a11bd845b90284f8e942890c4b1fb74f751785fa2f2\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "scripts/nns-dapp/release --save-proposal-id-to-file /home/runner/work/nns-dapp/release/proposal_id",
    "",
    "scripts/nns-dapp/release --save-proposal-id-to-file /home/runner/work/nns-dapp/release/proposal_id: \u001b[32mDone\u001b[0m",
    "Proposal ID: \u001b[32m123490\u001b[0m",
    "Proposal time: \u001b[32m2001-02-29 14:15:16\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git checkout release-candidate",
    "",
    "git checkout release-candidate: \u001b[32mDone\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git tag proposal-123490",
    "",
    "git tag proposal-123490: \u001b[32mDone\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git push origin tags/proposal-123490",
    "",
    "git push origin tags/proposal-123490: \u001b[32mDone\u001b[0m",
    "üëá Press enter to run the following command:",
    "",
    "git checkout Release-2001-02-29",
    "",
    "git checkout Release-2001-02-29: \u001b[32mDone\u001b[0m",
    "Post proposal on Slack: \u001b[32mhttps://dfinity.slack.com/archives/C02P68W6MQA/p1695977290251409\u001b[0m",
    "",
    "Schedule an appointment for trusted neurons voting (in 3 days)",
    "",
    "When you've done that ‚òùÔ∏è  confirm by entering 'y':",
    "Schedule voting: \u001b[32mDone\u001b[0m",
    "",
    "Create an event to remind yourself to silence alerts before voting",
    "",
    "When you've done that ‚òùÔ∏è  confirm by entering 'y':",
    "Schedule silence alerts: \u001b[32mDone\u001b[0m",
    "",
    "Create a forum post if there's something worth sharing",
    "",
    "When you've done that ‚òùÔ∏è  confirm by entering 'y':",
    "Forum post: \u001b[32mDone\u001b[0m"
  ],
  "expectedExitCode": 0
}
